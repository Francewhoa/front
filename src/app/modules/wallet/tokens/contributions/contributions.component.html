<div class="m-token--onboarding" *ngIf="!session.getLoggedInUser().rewards">
  <m-token--onboarding--rewards skippable="false"></m-token--onboarding--rewards>
</div>

<m-wallet-token--chart></m-wallet-token--chart>

<div class="m-token-contributions--ledger">
  <div class="m-token-contributions--ledger-filters m-border">
    <m-date-selector label="From:" [date]="startDate" (dateChange)="onStartDateChange($event)" dateFormat="shortDate"></m-date-selector>
    <m-date-selector label="To:" [date]="endDate" (dateChange)="onEndDateChange($event)" dateFormat="shortDate"></m-date-selector>
  </div>

  <table class="mdl-data-table mdl-js-data-table m-border" [mdl]>
    <thead>
      <tr class="m-token-contributions--ledger-header">
        <th class="mdl-data-table__cell--non-numeric m-data-title">Date</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Checkins</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Votes</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Comments</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Reminds</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Subscribers</th>
        <th class="mdl-data-table__cell--non-numeric m-data-title">Score</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let contribution of contributions; let i = index" class="m-token-contributions--ledger-row">
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.timestamp | date:'mediumDate':'+0000' }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.metrics.checkins?.score ? contribution.metrics.checkins.score : 0 | number }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.metrics.votes?.score ? contribution.metrics.votes.score : 0 | number }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.metrics.comments?.score ? contribution.metrics.comments.score : 0 | number }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.metrics.reminds?.score ? contribution.metrics.reminds.score : 0 | number }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category">{{ contribution.metrics.subscribers?.score ? contribution.metrics.subscribers.score : 0 | number }}</td>
        <td class="mdl-data-table__cell--non-numeric m-token-contributions--ledger-category" style="font-weight: bold">{{ contribution.score | number }}</td>
      </tr>

      <tr *ngIf="!contributions || !contributions.length" class="m-token-contributions--ledger-row m-wire-console--ledger-row-placeholder">
        <td colspan="7" class="m-token-contributions--ledger-row-notice">
          No contributions to show.
        </td>
      </tr>
    </tbody>
  </table>
</div>

<infinite-scroll
  distance="25%"
  (load)="load(false)"
  [moreData]="moreData"
  [inProgress]="inProgress">
</infinite-scroll>
